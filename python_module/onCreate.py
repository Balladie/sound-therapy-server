import os
import json

def countMp3Files(assetsDir):
    modes = ['adrenaline', 'healing', 'deepsleep', 'focus', 'recovery']
    counts = [0] * len(modes)

    for path, dirnames, filenames in os.walk(assetsDir):
       for filename in filenames:
           if '.mp3' not in filename: continue

           for i, mode in enumerate(modes):
               if mode in path:
                   counts[i] += 1

    return counts

def makeDataForKangMapV1():
    data = {}
    modes = ['adrenaline', 'healing', 'deepsleep', 'focus', 'recovery']
    weatherMains = ['Clear', 'Clouds', 'Atmosphere', 'Snow', 'Rain', 'Drizzle', 'Thunderstorm']
    timeRanges = ['Morning', 'Noon', 'Afternoon', 'Evening', 'Night', 'Dawn']

    for mode in modes:
        data[mode] = {}
        for weatherMain in weatherMains:
            data[mode][weatherMain] = {}

    data['adrenaline']['Clear']['Morning'] = "1,19/20,11/3"
    data['adrenaline']['Clear']['Noon'] = "20,11/19/1,3"
    data['adrenaline']['Clear']['Afternoon'] = "20,11/19/1,3"
    data['adrenaline']['Clear']['Evening'] = "3,11,20/19/1"
    data['adrenaline']['Clear']['Night'] = "3/19,1,11,20"
    data['adrenaline']['Clear']['Dawn'] = "1/3,19/11/20"
    data['adrenaline']['Clouds']['Morning'] = "4/8,12,17,19"
    data['adrenaline']['Clouds']['Noon'] = "11/8,12,17,19"
    data['adrenaline']['Clouds']['Afternoon'] = "11,14/8,12,17,19"
    data['adrenaline']['Clouds']['Evening'] = "3,11,14/8,19"
    data['adrenaline']['Clouds']['Night'] = "3/8,12,17,19"
    data['adrenaline']['Clouds']['Dawn'] = "4/3,8,12,19"
    data['adrenaline']['Atmosphere']['Morning'] = "4,15/12,13,18"
    data['adrenaline']['Atmosphere']['Noon'] = "8,12,13,18/7"
    data['adrenaline']['Atmosphere']['Afternoon'] = "8,12,13,18/7"
    data['adrenaline']['Atmosphere']['Evening'] = "7,15/8,12,13,18"
    data['adrenaline']['Atmosphere']['Night'] = "7/4,8,13,18"
    data['adrenaline']['Atmosphere']['Dawn'] = "4/7/8,12,13"
    data['adrenaline']['Snow']['Morning'] = "15/13,16,18/5"
    data['adrenaline']['Snow']['Noon'] = "13,16,18/5,7"
    data['adrenaline']['Snow']['Afternoon'] = "13,16,18/5,7"
    data['adrenaline']['Snow']['Evening'] = "5,7,15/13,18"
    data['adrenaline']['Snow']['Night'] = "7/5,13,16,18"
    data['adrenaline']['Snow']['Dawn'] = "13,16,18/5,7"
    data['adrenaline']['Rain']['Morning'] = "15/6,8,13,16"
    data['adrenaline']['Rain']['Noon'] = "9/6,8,13,16"
    data['adrenaline']['Rain']['Afternoon'] = "2,9/6,8,13"
    data['adrenaline']['Rain']['Evening'] = "2,5,7,10,15"
    data['adrenaline']['Rain']['Night'] = "7,10/6,8,16"
    data['adrenaline']['Rain']['Dawn'] = "10/6,7,13,16"
    data['adrenaline']['Drizzle']['Morning'] = "16,17/2,14"
    data['adrenaline']['Drizzle']['Noon'] = "16,17/2,14"
    data['adrenaline']['Drizzle']['Afternoon'] = "2,14/16,17"
    data['adrenaline']['Drizzle']['Evening'] = "2,14/16,17"
    data['adrenaline']['Drizzle']['Night'] = "16,17/2,14"
    data['adrenaline']['Drizzle']['Dawn'] = "16,17/2,14"
    data['adrenaline']['Thunderstorm']['Morning'] = "6/10/5,9,16"
    data['adrenaline']['Thunderstorm']['Noon'] = "6/10/5,9,16"
    data['adrenaline']['Thunderstorm']['Afternoon'] = "6/10/5,9,16"
    data['adrenaline']['Thunderstorm']['Evening'] = "10/6/5,7,13"
    data['adrenaline']['Thunderstorm']['Night'] = "10/6/5,7,13"
    data['adrenaline']['Thunderstorm']['Dawn'] = "10/6/5,7,13"
    data['healing']['Clear']['Morning'] = "1,4,5,14"
    data['healing']['Clear']['Noon'] = "1,8,14/12"
    data['healing']['Clear']['Afternoon'] = "1,8,14,17"
    data['healing']['Clear']['Evening'] = "1,5,17/12"
    data['healing']['Clear']['Night'] = "13,17/12,2,20"
    data['healing']['Clear']['Dawn'] = "4,13/12,2,20"
    data['healing']['Clouds']['Morning'] = "1,4,5,8,14"
    data['healing']['Clouds']['Noon'] = "1,8,14/3,12,19"
    data['healing']['Clouds']['Afternoon'] = "1,8,14,17"
    data['healing']['Clouds']['Evening'] = "1,5,17/6,19"
    data['healing']['Clouds']['Night'] = "17/3,6,12,19"
    data['healing']['Clouds']['Dawn'] = "4/3,6,12,19"
    data['healing']['Atmosphere']['Morning'] = "8,14/6,9,10,19"
    data['healing']['Atmosphere']['Noon'] = "8,14/6,9,10,19"
    data['healing']['Atmosphere']['Afternoon'] = "8,14/6,9,10,19"
    data['healing']['Atmosphere']['Evening'] = "13/6,9,10,19"
    data['healing']['Atmosphere']['Night'] = "13/6,9,10,19"
    data['healing']['Atmosphere']['Dawn'] = "13/6,9,10,19"
    data['healing']['Snow']['Morning'] = "18/6,7,9,15"
    data['healing']['Snow']['Noon'] = "18/6,7,9,15"
    data['healing']['Snow']['Afternoon'] = "18/6,7,9,15"
    data['healing']['Snow']['Evening'] = "18/6,7,9,15"
    data['healing']['Snow']['Night'] = "6,7,9,15,20"
    data['healing']['Snow']['Dawn'] = "6,7,9,15,20"
    data['healing']['Rain']['Morning'] = "18/7,9,10"
    data['healing']['Rain']['Noon'] = "18/7,9,10"
    data['healing']['Rain']['Afternoon'] = "18/7,15,16"
    data['healing']['Rain']['Evening'] = "18/7,15,16,2"
    data['healing']['Rain']['Night'] = "7,15,16,9,10,11"
    data['healing']['Rain']['Dawn'] = "7,15,16,9,10,11"
    data['healing']['Drizzle']['Morning'] = "7,9,10,16,18"
    data['healing']['Drizzle']['Noon'] = "7,9,10,16,18"
    data['healing']['Drizzle']['Afternoon'] = "7,9,10,16,18"
    data['healing']['Drizzle']['Evening'] = "7,9,10,16,18,2"
    data['healing']['Drizzle']['Night'] = "7,9,10,16,18,20"
    data['healing']['Drizzle']['Dawn'] = "7,9,10,16,18,20"
    data['healing']['Thunderstorm']['Morning'] = "11,16/7,15"
    data['healing']['Thunderstorm']['Noon'] = "11,16/7,15"
    data['healing']['Thunderstorm']['Afternoon'] = "11,16/7,15"
    data['healing']['Thunderstorm']['Evening'] = "11,16/7,15/2"
    data['healing']['Thunderstorm']['Night'] = "11,16/7,15/2,20"
    data['healing']['Thunderstorm']['Dawn'] = "11,16/7,15/2,20"
    data['deepsleep']['Clear']['Morning'] = "1,8,20/17"
    data['deepsleep']['Clear']['Noon'] = "8,20/17"
    data['deepsleep']['Clear']['Afternoon'] = "20/17,8"
    data['deepsleep']['Clear']['Evening'] = "1,10,11,20"
    data['deepsleep']['Clear']['Night'] = "1,2,3,10,11,14"
    data['deepsleep']['Clear']['Dawn'] = "1,2,3,8,11,14"
    data['deepsleep']['Clouds']['Morning'] = "1,8,16,20"
    data['deepsleep']['Clouds']['Noon'] = "8,16,20/4,6,17"
    data['deepsleep']['Clouds']['Afternoon'] = "16,20/4,6,17"
    data['deepsleep']['Clouds']['Evening'] = "1,10,11,16,20"
    data['deepsleep']['Clouds']['Night'] = "1,2,3,10,11,14"
    data['deepsleep']['Clouds']['Dawn'] = "1,2,3,8,11,14"
    data['deepsleep']['Atmosphere']['Morning'] = "9,16,20/4"
    data['deepsleep']['Atmosphere']['Noon'] = "9,16,20/4"
    data['deepsleep']['Atmosphere']['Afternoon'] = "9,16,20/4"
    data['deepsleep']['Atmosphere']['Evening'] = "11,12,16,18"
    data['deepsleep']['Atmosphere']['Night'] = "2,11,12,18"
    data['deepsleep']['Atmosphere']['Dawn'] = "2,11,12,18"
    data['deepsleep']['Snow']['Morning'] = "4,5,12,13,19"
    data['deepsleep']['Snow']['Noon'] = "4,5,12,13,19"
    data['deepsleep']['Snow']['Afternoon'] = "4,5,12,13,19"
    data['deepsleep']['Snow']['Evening'] = "12/4,5,13,19"
    data['deepsleep']['Snow']['Night'] = "12/4,5,13,19"
    data['deepsleep']['Snow']['Dawn'] = "12/4,5,13,19"
    data['deepsleep']['Rain']['Morning'] = "9,15/4,7,13,19"
    data['deepsleep']['Rain']['Noon'] = "9,15/4,7,13,19"
    data['deepsleep']['Rain']['Afternoon'] = "9,15/4,7,13,19"
    data['deepsleep']['Rain']['Evening'] = "15,18/4,7,13,19"
    data['deepsleep']['Rain']['Night'] = "18/4,7,13,19"
    data['deepsleep']['Rain']['Dawn'] = "18/4,7,13,19"
    data['deepsleep']['Drizzle']['Morning'] = "9,15,16/6,7,13"
    data['deepsleep']['Drizzle']['Noon'] = "9,15,16/6,7,13"
    data['deepsleep']['Drizzle']['Afternoon'] = "9,15,16/6,7,13"
    data['deepsleep']['Drizzle']['Evening'] = "11,12,15,16,18"
    data['deepsleep']['Drizzle']['Night'] = "11,12,18/6,7,13"
    data['deepsleep']['Drizzle']['Dawn'] = "11,12,18/6,7,13"
    data['deepsleep']['Thunderstorm']['Morning'] = "15/5/13,19"
    data['deepsleep']['Thunderstorm']['Noon'] = "15/5/13,19"
    data['deepsleep']['Thunderstorm']['Afternoon'] = "15/5/13,19"
    data['deepsleep']['Thunderstorm']['Evening'] = "15/5/13,19"
    data['deepsleep']['Thunderstorm']['Night'] = "5/15/7,19"
    data['deepsleep']['Thunderstorm']['Dawn'] = "5/15/7,19"
    data['focus']['Clear']['Morning'] = "9,20/14,17"
    data['focus']['Clear']['Noon'] = "9,20/14,17"
    data['focus']['Clear']['Afternoon'] = "9,20/14,17"
    data['focus']['Clear']['Evening'] = "14,17/9,20"
    data['focus']['Clear']['Night'] = "14,17/9,20"
    data['focus']['Clear']['Dawn'] = "14,17/9,20"
    data['focus']['Clouds']['Morning'] = "2,9,10,13,15,20"
    data['focus']['Clouds']['Noon'] = "2,9,10,13,15,20"
    data['focus']['Clouds']['Afternoon'] = "2,9,10,13,15,20"
    data['focus']['Clouds']['Evening'] = "1,14,17/2,10,13"
    data['focus']['Clouds']['Night'] = "1,14,17/2,10,13"
    data['focus']['Clouds']['Dawn'] = "1,14,17/2,10,13"
    data['focus']['Atmosphere']['Morning'] = "16/4,9,10,13,20"
    data['focus']['Atmosphere']['Noon'] = "16/4,9,10,13,20"
    data['focus']['Atmosphere']['Afternoon'] = "7,16/9,10,13,29"
    data['focus']['Atmosphere']['Evening'] = "1,6,7,14,18"
    data['focus']['Atmosphere']['Night'] = "1,6,7,14,18"
    data['focus']['Atmosphere']['Dawn'] = "1,6,14,18"
    data['focus']['Snow']['Morning'] = "16/2,4,8,12,19"
    data['focus']['Snow']['Noon'] = "16/2,4,8,12"
    data['focus']['Snow']['Afternoon'] = "16/2,4,8,12"
    data['focus']['Snow']['Evening'] = "6,7,18/3,11,12"
    data['focus']['Snow']['Night'] = "6,7,18/3,11,12"
    data['focus']['Snow']['Dawn'] = "6,18/3,11,12"
    data['focus']['Rain']['Morning'] = "3,11,12,15,19"
    data['focus']['Rain']['Noon'] = "3,11,12,15,19"
    data['focus']['Rain']['Afternoon'] = "3,11,12,15,19"
    data['focus']['Rain']['Evening'] = "3,11,12,15,19"
    data['focus']['Rain']['Night'] = "5/3,11,12,15,19"
    data['focus']['Rain']['Dawn'] = "5/3,11,12,15,19"
    data['focus']['Drizzle']['Morning'] = "16/4,15,2"
    data['focus']['Drizzle']['Noon'] = "16/4,15,2"
    data['focus']['Drizzle']['Afternoon'] = "16/4,15,2"
    data['focus']['Drizzle']['Evening'] = "18/11,19"
    data['focus']['Drizzle']['Night'] = "18/11,19"
    data['focus']['Drizzle']['Dawn'] = "18/11,19"
    data['focus']['Thunderstorm']['Morning'] = "3,11,12/5"
    data['focus']['Thunderstorm']['Noon'] = "3,11,12/5"
    data['focus']['Thunderstorm']['Afternoon'] = "3,11,12/5"
    data['focus']['Thunderstorm']['Evening'] = "3,11,12/5"
    data['focus']['Thunderstorm']['Night'] = "5/3,11,12"
    data['focus']['Thunderstorm']['Dawn'] = "5/3,11,12"
    data['recovery']['Clear']['Morning'] = "13/5,7,10,19"
    data['recovery']['Clear']['Noon'] = "5,7,10,19"
    data['recovery']['Clear']['Afternoon'] = "5,7,10,19"
    data['recovery']['Clear']['Evening'] = "4,6,16/7,19"
    data['recovery']['Clear']['Night'] = "4,6,16,17"
    data['recovery']['Clear']['Dawn'] = "4,6,16,17"
    data['recovery']['Clouds']['Morning'] = "5,7,10,19"
    data['recovery']['Clouds']['Noon'] = "5,7,10,19"
    data['recovery']['Clouds']['Afternoon'] = "5,7,10,19"
    data['recovery']['Clouds']['Evening'] = "4,6,16"
    data['recovery']['Clouds']['Night'] = "4,6,16,17"
    data['recovery']['Clouds']['Dawn'] = "4,6,16,17"
    data['recovery']['Atmosphere']['Morning'] = "13/8,10,12,14,19"
    data['recovery']['Atmosphere']['Noon'] = "8,10,12,14,19"
    data['recovery']['Atmosphere']['Afternoon'] = "8,10,12,14,19"
    data['recovery']['Atmosphere']['Evening'] = "2/8,10,12,14,19"
    data['recovery']['Atmosphere']['Night'] = "2/8,10,12,14,19"
    data['recovery']['Atmosphere']['Dawn'] = "2,8,10,12,14,19"
    data['recovery']['Snow']['Morning'] = "13/7,8,18"
    data['recovery']['Snow']['Noon'] = "13,7,8,18"
    data['recovery']['Snow']['Afternoon'] = "13,7,8,18"
    data['recovery']['Snow']['Evening'] = "9,11,15,20"
    data['recovery']['Snow']['Night'] = "9,11,15,20"
    data['recovery']['Snow']['Dawn'] = "9,11,15,20"
    data['recovery']['Rain']['Morning'] = "3/9,11,18,20"
    data['recovery']['Rain']['Noon'] = "9,11,18,20"
    data['recovery']['Rain']['Afternoon'] = "1/9,11,18,20"
    data['recovery']['Rain']['Evening'] = "1,3/9,11"
    data['recovery']['Rain']['Night'] = "1,3/9,11"
    data['recovery']['Rain']['Dawn'] = "1/9,11,18,20"
    data['recovery']['Drizzle']['Morning'] = "3/7,14,19,15"
    data['recovery']['Drizzle']['Noon'] = "7,14,19,15"
    data['recovery']['Drizzle']['Afternoon'] = "1/7,14,19,15"
    data['recovery']['Drizzle']['Evening'] = "1,2,3"
    data['recovery']['Drizzle']['Night'] = "1,2,3,17"
    data['recovery']['Drizzle']['Dawn'] = "1,17/11,18,20"
    data['recovery']['Thunderstorm']['Morning'] = "9,11/1"
    data['recovery']['Thunderstorm']['Noon'] = "9,11/1"
    data['recovery']['Thunderstorm']['Afternoon'] = "1/9,11"
    data['recovery']['Thunderstorm']['Evening'] = "1/9,11"
    data['recovery']['Thunderstorm']['Night'] = "1/9,11"
    data['recovery']['Thunderstorm']['Dawn'] = "1/9,11"

    workDir = os.path.dirname(os.path.abspath(__file__))
    json.dump(data, open(workDir + "./data/kangMapV1.json", 'w+'))

if (__name__ == '__main__'):
    workDir = os.path.dirname(os.path.abspath(__file__))
    assetsDir = workDir + '/../nodejs/sounds'
    counts = countMp3Files(assetsDir)

    with open(workDir + '/logs/numMp3.txt', 'w+') as f:
        for i, count in enumerate(counts):
            if i == len(counts):
                f.write(str(count))
            else:
                f.write(str(count) + '\n')
    print("[onCreate] Count result:", counts)

    print("[onCreate] Making data file for kangMapV1...")
    makeDataForKangMapV1()

    print("[onCreate] Finished onCreate.py")
